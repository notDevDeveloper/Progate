# Progate

## Go学習コース2

### 1章：目標物を確認しよう

#### 1. 目標物を確認しよう

### 2章：標準パッケージを使ってみよう

#### 2. fmtパッケージ

##### 標準パッケージ

プログラムを書くとき、すべての処理を自分で書く必要はない。Goには**標準パッケージ**と呼ばれるものがあり、100種類以上の便利な機能がはじめから用意されている。これらを自分たちのプログラム内で自由に用いることができる。たとえば以下のようなパッケージがあり、さまざまな処理を行うことができる。

|パッケージ|処理|
|:--|:--|
|fmt|コンソールに出力できる|
|math/rand|ランダムな数値を生成できる|
|time|時間に関する処理ができる|

##### パッケージのインポート

標準パッケージを自分のプログラムで使うためには、インポートする必要がある。インポートは、「package main」の下に「**import "パッケージ名"**」と記述する。たとえば、コンソールへの出力機能などを持つfmtパッケージは「**import "fmt"**」と書く。パッケージ名をダブルクォーテーションで囲むことに注意する。

```go
package main
import "fmt"
```

##### パッケージの使い方

標準パッケージの機能を使うには、以下のように**パッケージ名.機能名**とする。fmtパッケージの**Println**という機能は、コンソールに()内の値を出力する。GoⅠで使っていた「println」と似ているが、「fmt.Println」の方が表示できるデータ型は多いため、今後はこちらを使うようにする。

```go
package main
import "fmt"
func main() {
  fmt.Println("Hello,World")
}
```

##### 使用していないパッケージ

Goでは、インポートしたパッケージは必ず使う必要がある。たとえば以下のように、fmtパッケージをインポートしているのに使っていない場合、エラーが発生する。使用しないパッケージはインポートしないようにする。

#### 3. 書式付き出力

##### fmt.Printf

fmtパッケージの**Printf**という機能を用いると、書式を指定してコンソールに出力することができる。書式とは、出力する文字列の形だと考える。以下のように、1つめには書式、2つめには出力に用いる値を指定する。

```go
fmt.Printf(書式, 出力に用いる値)
```

##### 文字列の書式

書式（出力する文字列の形式）は、以下のように指定する。**"Hello, %sさん"** のように **%s** を文字列の中に含めると、「fmt.Printf」の2つめに指定した文字列が%sの部分に挿入されて出力される。以下の例では、変数nameの値が「にんじゃわんこ」であるため、「Hello, にんじゃわんこさん」とコンソールに出力されている。

```go
func main() {
  name := "にんじゃわんこ"
  fmt.Printf("Hello, %sさん", name)
}
```

複数の値を埋め込む

%sは書式中にいくつでも用いることができる。以下のように%sを2回用いる場合、それぞれの%sに挿入する文字列を指定する必要がある。以下の例では、書式中の1つめの%sに「fmt.Printf」の2つめで指定した「Hello」が、2つめの%sに「fmt.Printf」の3つめで指定した変数nameの値（にんじゃわんこ）が挿入される。

```go
func main() {
  name := "にんじゃわんこ"
  fmt.Printf("%s, %sさん", "Hello", name)
}
```

#### 4. 書式付き出力（整数）

##### 整数を埋め込む

書式には、文字列だけでなく数値も挿入することができる。数値の場合には**%d**を使う。%sと同じように、挿入する数値を「fmt.Printf」の2つめに指定する。以下では「"%d歳です"」の%dの部分に、変数ageの値18が挿入されている。

```go
func main() {
  age := 18
  fmt.Printf("%d歳です", age)
}
```

##### データ型の不一致

「fmt.Printf」では文字列に%sや%dで値を挿入することができる。このとき、%sは文字列、%dは数値を挿入するために用いる。指定する値のデータ型が文字列にもかかわらず、書式には%dを使ったり、その逆を行ったりした場合、エラーとなる。

#### 5. 改行文字

##### PrintfとPrintlnの違い

「fmt.Printf」は、「fmt.Println」と違い、出力した文字列のあとで改行を行ってくれない。以下のように、複数の「fmt.Printf」を行うと、出力は同じ行の末尾から続けて行われてしまう。

```go
func main() {
  fmt.Printf("Hello, %sさん", "にんじゃわんこ")
  fmt.Printf("Hello, %sさん", "ひつじ仙人")

  // 出力：Hello, にんじゃわんこさんHello, ひつじ仙人さん
}
```

##### \n

文字列中で **\n** を用いると、出力される文字列が改行される（\n自体は出力されない）。以下のように文字列の末尾に\nを書くと、出力した文字列の最後で改行が行われ、次の出力は次の行から行われる。

```go
func main() {
  fmt.Printf("Hello, %sさん\n", "にんじゃわんこ")
  fmt.Printf("Hello, %sさん\n", "ひつじ仙人")
}
```

\nは文字列中のどこでも使うことができるので、たとえば文字列の途中に含めれば、\nの次の文字は、改行されて次の行に出力される。

### 3章：繰り返し処理

#### 6. for

##### 繰り返し処理

**繰り返し処理**とは、一定の処理を自動で繰り返し行う処理のこと。たとえば、100回"Hello World"とコンソールに出力したい場合、以下のようにfmt.Println("Hello")を100回書くのは面倒。こういった処理を自動化するのが繰り返し処理。

```go
func main() {
  fmt.Println("Hello")
  fmt.Println("Hello")
  ・・・
  ・・・
  fmt.Println("Hello")

  // 100回書くのは大変
}
```

##### for文

Goでは、繰り返し処理のために**for**文を用いる。for文では、**変数の初期化**、**繰り返しの条件**、**変数の更新**の3つを指定し、{}の中の処理を繰り返すことができる。以下の例ではまず変数iに1が代入され、「iが4以下」を満たす間{}内の処理が繰り返され、終わるたびに変数の更新「i++」が実行される。その結果、"Hello"が4回表示される。

```go
for i := 1; i <= 4; i++ {
  fmt.Println("Hello")
}

// 変数の初期化：i := 1
// 繰り返しの条件：i <= 4
// 変数の更新：i++
// 繰り返し処理：fmt.Println("Hello")
```

##### 処理の流れ

1. 変数の初期化
1. 条件
1. 繰り返す処理
1. 変数の更新

繰り返しの1周目の変数iは1だが、forの{}の中の処理（3）が終わるたびに、変数iが更新（4）され1, 2, 3, 4, 5と変化していく。そしてi <= 5（2）が成立しなくなると自動的に繰り返しが終了する。for文の記述は難しく感じるが、頻繁に使うのでここでしっかり覚える。

```go
for i := 1; i <= 5; i++ {
  fmt.Println(i)
}
```

##### 複数の処理を繰り返す

forで繰り返す処理は1つでなくても構わない。forの{}の中に複数の処理を書くとそれを書いた順に繰り返してくれる。

##### for文の変数定義の注意点

for文の変数定義では、**var**を使うことは出来ず、**:=** を用いた変数定義しか出来ない。varを用いると、エラーが発生する。これはGoの決まりなので覚えておく。

### 4章：おみくじアプリを改良しよう

#### 7. randパッケージ

##### おみくじ結果をランダムにしよう

残りの演習で、GoⅠで作ったおみくじアプリを改良する。GoⅠで作ったおみくじアプリは、一種類のおみくじ結果しか表示できないので、おみくじ結果がランダムで表示されるようにする。

##### ランダムな数

プログラムは決められた処理をすることが多いが、今回のようにランダムな処理をしたい場合がある。Goにはランダムな数を扱うための**math/rand**というパッケージがある。またランダムな数のことを日本語で**乱数**と呼ぶ。

##### 乱数の生成

乱数を使うには、まずmath/randパッケージを、**import "math/rand"** のようにインポートする。そして、「**rand.Intn(10)**」と書くことで、0-9までの10個の整数の乱数を生成することができる。

```go
package main
import "fmt"
import "math/rand"

func main() {
  fmt.Println(rand.Intn(10))
  fmt.Println(rand.Intn(10))
}
```

#### 8. 完全な乱数を作成しよう

##### 乱数の注意点

実は単に「rand.Intn(10)」のように呼び出すだけでは、実行する度に、毎回同じ乱数が生成される。

##### 完全な乱数を生成する

完全な乱数を生成するために、「**rand.Seed(time.Now().Unix())**」という1行を追加する必要がある。また、このコードを使うためには **「time」パッケージ**をインポートする必要がある。

#### 9. おみくじアプリを改良しよう

##### おみくじアプリを改良しよう
